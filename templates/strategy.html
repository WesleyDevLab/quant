<!DOCTYPE html>
<html lang="zh-CN" class="desktop landscape"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8"><title>{{name}}</title>
    <link type="text/css" rel="stylesheet" href="/static/css/yestrap-light.8e2a1ea4.css">
    <link type="text/css" rel="stylesheet" href="/static/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="/static/css/main.78d1255134d0efa598029735c5dfb275.css">
    <base href=".">
    <script src="/static/js/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" async="async" data-requirecontext="_" src="/static/js/bootstrap-datepicker.js"></script>
    <script src="/static/js/highstock.js"></script>
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" src="/static/js/sorttable.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <link type="text/css" rel="stylesheet" href="/static/css/style.5c97a3af.css">
    <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mathjax" src="/static/js/MathJax.js"></script>
    <link type="text/css" rel="stylesheet" href="/static/css/style.ccde8427.css">
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <link href="/static/css/datepicker.css" rel="stylesheet">
    <style type="text/css">
        .MathJax_Preview {color: #888}
        #MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
        #MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
        .MathJax_Error {color: #CC0000; font-style: italic}
    </style>
    <style>
        /* sorttable styles, these add the placeholder sort arrow and cursor */
        .sortable th:not(.sorttable_nosort){
            cursor:pointer;
        }
    .sortable th:not(.sorttable_nosort):not(.sorttable_sorted):not(.sorttable_sorted_reverse):after{
        opacity:0.25;
        display:inline;
        content:'\a0\25B4';
    }
    /* styles used for these examples */
    table{
        padding:0;
        border-spacing:0;
        text-align:center;
    }
    tbody tr:hover{
        background:#eee;
    }
    .sortable th{
        background:#96BDF1;
    }
    thead th{border-top:none;}
    tfoot th{border-bottom:none;}
    .sortable tr:not(:last-child) .sortable td{
        border-bottom:1px solid #C9C9C9;
    }
    .sortable th:not(:last-child), .sortable td:not(:last-child){
        border-right:1px solid #C9C9C9;
    }
    a{color:#567BF0}
    a:hover,a:focus{color:#112D87}
    .ok{color:#019e15;}
    .err{color:#e11b31;}
    .works{color:orange;}
    .question{color:#184df3;}
    .row{overflow:hidden;}
    .row>div{
        float:left;
        width:490px;
    }
    .row.w500>div{
        width:500px;
    }
    /* FAQ styles */
    div.Q{
        display:block;
        cursor:pointer;
        text-decoration:none;
        color:#fff;
        background:#000;
    }
    div.Q:before{
        color:#feba05;
        content:'Q: ';
    }
    div.Q span{
        display:none;
        cursor:default;
        padding:0 0 8px 20px;
    }
    div.Q span:before{
        color:#019e15;
        content:'A: ';
    }
    div.Q:hover{
        background:#111;
    }
    div.Q:focus{
        pointer-events:none;
    }
    div.Q:focus span{
        pointer-events:auto;
        display:block;
    }
    </style>
</head>
<body class="strategy-detail-white">
    <div id="MathJax_Message" style="display: none;"></div>
    <iframe id="downloader" style="display: none;"></iframe>


<div class="wrapper">
    <div class="main">
        <div class="trade">
            <div class="region-trade-main">
                <div id="7081" class="strategy-detail">
                    <div class="overview">
                        <div class="container">
        <a class="back" href="{{ url_for('index') }}" data-href="trade/strategies" title="返回首页">
            <i class="fa fa-chevron-left"></i>
        </a>
        <div class="status">
            
            
        </div>
        <h3 class="title">{{name}}</h3>
        <div class="pull-right actions">
<a class="btn btn-link terminate" data-loading-text="终止中...">
    <i class="fa fa-stop"></i> 终止策略
</a>

</div>
<ul class="summary clearfix">
    <li>
        {% if survey != None %}
            {% if survey.profit[-1] > 0 %}
            <span class="value change-up">+{{survey.profit[-1]}}%</span>
            {% else %}
            <span class="value change-down">{{survey.profit[-1]}}%</span>
            {% endif %}
        {% else %}
        <span class="value">初始化中</span>
        {% endif %}
    <span class="name">累计收益</span>
</li>
<li>
    {% if survey != None %}
    {% if survey.daily[-1] > 0 %}
    <span class="value change-up">+{{survey.daily[-1]}}%</span>
    {% else %}
    <span class="value change-down">{{survey.daily[-1]}}%</span>
    {% endif %}
    {% else %}
    <span class="value">初始化中</span>
    {% endif %}
    <span class="name">当日收益</span>
</li>
<li>
    {% if survey != None %}
    <span class="value">{{survey.sharp[-1]}}</span>
    {% else %}
    <span class="value">初始化中</span>
    {% endif %}
    <span class="name">夏普比率</span>
</li>
<li>
    {% if survey != None %}
    <span class="value">{{survey.marketValue[-1]}}</span>
    {% else %}
    <span class="value">初始化中</span>
    {% endif %}
    <span class="name">持仓市值</span>
</li>
<li>
    {% if survey != None %}
    <span class="value">{{survey.enable[-1]}}</span>
    {% else %}
    <span class="value">初始化中</span>
    {% endif %}
    <span class="name">可用金额</span>
</li>
</ul>
    </div>
</div>
<div class="container">
    <ul class="nav nav-tabs">
        <li class="active">
            <a class="tab overview" href="#strategy-7081-overview" data-toggle="tab">策略概览</a>
        </li>
        <li>
            <a class="tab risk" href="#strategy-7081-risk" data-toggle="tab">风险指标</a>
        </li>
        <li>
            <a class="tab log" href="#strategy-7081-log" data-toggle="tab">策略日志</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane overview active" id="strategy-7081-overview">
            <div class="detail-overview">
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default return">
                            <div class="panel-heading">累积收益率</div>
                            <div class="panel-body">
                                <div class="chart" data-highcharts-chart="2">
                                    <div class="highcharts-container" id="highcharts-6" style="position: relative; overflow: hidden; width: 458px; height: 250px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                    </div>
                                    <script>
                                        $(function () {
                                          
                                          var strategy_data;
                                          var benchmark_data;
                                          var None = null
                                          
                                          if ('{{survey != None}}' == 'True')
                                          {
                                          var dates = {{survey.date}};
                                          var benchmarks = {{survey.benchmark}};
                                          var enables = {{survey.enable}};
                                          var marketValues = {{survey.marketValue}};
                                          
                                          strategy_data = new Array(dates.length);
                                          benchmark_data = new Array(dates.length);
                                          
                                          for(i = 0; i < dates.length; i++) {
                                          strategy_data[i] = [dates[i],enables[i]+marketValues[i]]
                                          benchmark_data[i] = [dates[i],benchmarks[i]]
                                          }
                                          }
                                          
                                          Highcharts.setOptions({
                                                                global: {
                                                                timezoneOffset: -8 * 60
                                                                }
                                                                });
                                          

                                          $('#highcharts-6').highcharts('StockChart', {
                                                                     
                                                                     rangeSelector: {
                                                                     enabled: false
                                                                     },
                                                                     
                                                                     xAxis: {
                                                                     type: 'datetime',
                                                                     dateTimeLabelFormats: {
                                                                     second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                     minute: '%Y-%m-%d<br/>%H:%M',
                                                                     hour: '%Y-%m-%d<br/>%H:%M',
                                                                     day: '%Y-%m-%d',
                                                                     week: '%Y-%m-%d',
                                                                     month: '%Y-%m',
                                                                     year: '%Y'
                                                                     }
                                                                     },
                                                                     
                                                                     yAxis: {
                                                                     opposite:false,
                                                                     labels: {
                                                                     formatter: function () {
                                                                     return this.value + '%';
                                                                     }
                                                                     },
                                                                     plotLines: [{
                                                                                 value: 0,
                                                                                 width: 2,
                                                                                 color: 'silver'
                                                                                 }]
                                                                     },
                                                                     navigation: {
                                                                     buttonOptions: {
                                                                     enabled: false
                                                                     }
                                                                     },
                                                                     navigator: {
                                                                     enabled: false
                                                                     },
                                                                     scrollbar: {
                                                                     enabled: false
                                                                     },
                                                                     
                                                                     plotOptions: {
                                                                     series: {
                                                                     compare: 'percent'
                                                                     }
                                                                     },
                                                                     credits: {
                                                                     enabled: false
                                                                     },
                                                                     
                                                                     tooltip: {
                                                                     dateTimeLabelFormats: {
                                                                     second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                     minute: '%Y-%m-%d<br/>%H:%M',
                                                                     hour: '%Y-%m-%d<br/>%H:%M',
                                                                     day: '%Y-%m-%d',
                                                                     week: '%Y-%m-%d',
                                                                     month: '%Y-%m',
                                                                     year: '%Y'
                                                                     },
                                                                     pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
                                                                     valueDecimals: 2
                                                                     },
                                                                     
                                                                     series: [{
                                                                              _colorIndex: 0,
                                                                              _symbolIndex: 0,
                                                                              data:strategy_data,
                                                                              name:"策略"
                                                                              },{
                                                                              _colorIndex: 1,
                                                                              _symbolIndex: 1,
                                                                              data:benchmark_data,
                                                                              name:"沪深300"
                                                                              }]
                                                                     });
                                          
                                          });
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="panel panel-default drawdown">
                            <div class="panel-heading">回撤走势</div>
                            <div class="panel-body">
                                <div class="chart" data-highcharts-chart="3">
                                    <div class="highcharts-container" id="highcharts-4" style="position: relative; overflow: hidden; width: 458px; height: 250px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                    </div>
                                    <script>
                                        $(function () {
                                          
                                          var pullback_data
                                          var None = null
                                          
                                          if ('{{survey != None}}' == 'True')
                                          {
                                          var dates = {{survey.date}};
                                          var pullbacks = {{survey.pullback}};
                                          
                                          pullback_data = new Array(dates.length);
                                          
                                          for(i = 0; i < dates.length; i++) {
                                          pullback_data[i] = [dates[i],pullbacks[i]]
                                          }
                                          }

                                          $('#highcharts-4').highcharts('StockChart', {
                                                                     
                                                                     rangeSelector: {
                                                                     enabled: false
                                                                     },
                                                                     
                                                                     xAxis: {
                                                                     type: 'datetime',
                                                                     dateTimeLabelFormats: {
                                                                     second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                     minute: '%Y-%m-%d<br/>%H:%M',
                                                                     hour: '%Y-%m-%d<br/>%H:%M',
                                                                     day: '%Y-%m-%d',
                                                                     week: '%Y-%m-%d',
                                                                     month: '%Y-%m',
                                                                     year: '%Y'
                                                                     }
                                                                     },
                                                                     
                                                                     yAxis: {
                                                                     opposite:false,
                                                                     floor: 0,
                                                                     min: 0,
                                                                     labels: {
                                                                     formatter: function () {
                                                                     return this.value + '%';
                                                                     }
                                                                     },
                                                                     plotLines: [{
                                                                                 value: 0,
                                                                                 width: 2,
                                                                                 color: 'silver'
                                                                                 }]
                                                                     },
                                                                     
                                                                     navigation: {
                                                                     buttonOptions: {
                                                                     enabled: false
                                                                     }
                                                                     },
                                                                     navigator: {
                                                                     enabled: false
                                                                     },
                                                                     scrollbar: {
                                                                     enabled: false
                                                                     },
                                                                     credits: {
                                                                     enabled: false
                                                                     },
                                                                     
                                                                     tooltip: {
                                                                     dateTimeLabelFormats: {
                                                                     second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                     minute: '%Y-%m-%d<br/>%H:%M',
                                                                     hour: '%Y-%m-%d<br/>%H:%M',
                                                                     day: '%Y-%m-%d',
                                                                     week: '%Y-%m-%d',
                                                                     month: '%Y-%m',
                                                                     year: '%Y'
                                                                     },
                                                                     pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}%</b>',
                                                                     valueDecimals: 2
                                                                     },
                                                                     
                                                                     series: [{
                                                                              _colorIndex: 0,
                                                                              _symbolIndex: 0,
                                                                              data:pullback_data,
                                                                              name:"回撤"
                                                                              }]
                                                                     });
                                          
                                          });
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default position">
                    <div class="panel-heading">
                        证券持仓
                        <div class="date">
                            
                            
                            <div class="input-append date" id="dp1">
                                <input class="span2" size="16" type="text" readonly="">
                                <span class="add-on"><i class="fa fa-calendar"></i></span>
                            </div>
                            <input type="hidden" name="secret" id="secret" value="SHH!">
                            <input type="hidden" id="positions_date">
                                    





                        </div>
    </div>
    <div class="panel-body">
        <div id="DataTables_Table_2_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
            <div class="dataTables_scroll">
                <div class="dataTables_scrollBody" style="position: relative; overflow: auto; height: 368px; width: 100%;">
                    <div id="positions">
                    <table class="sortable" role="grid" style="width: 100%;">
                            <tr>
                                <th>证券代码</th>
                                <th>证券名称</th>
                                <th>持仓数量</th>
                                <th>持仓成本</th>
                                <th>市价</th>
                                <th>市值</th>
                                <th>当日涨跌</th>
                                <th>权重</th>
                            </tr>
                            {% if positions != None %}
                                {% for i in positions %}
                                <tr role="row" class="odd">
                                    <td>{{i.ticker}}</td>
                                    <td>{{i.name}}</td>
                                    <td>{{i.amount}}</td>
                                    <td>{{i.cost}}</td>
                                    <td>{{i.price}}</td>
                                    <td>{{i.value}}</td>
                                    {% if i.increase > 0 %}
                                    <td class='sorting_1'><span class="change-up">+{{i.increase}}%</span></td>
                                    {% else %}
                                    <td class='sorting_1'><span class="change-down">{{i.increase}}%</span></td>
                                    {% endif %}
                                    <td>{{i.weight}}%</td>
                                </tr>
                                {% endfor %}
                            {% endif %}
                    </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-default order">
    <div class="panel-heading">
        调仓记录
        <div class="date">
            
            
            
            
            <div class="input-append date" id="dp2">
                <input class="span2" size="16" type="text" readonly="">
                    <span class="add-on"><i class="fa fa-calendar"></i></span>
                    </div>
            <input type="hidden" id="transfers_date">
            
            
            
        </div>
    </div>
    <div class="panel-body">
        <div id="DataTables_Table_3_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
            <div class="dataTables_scroll">
                <div class="dataTables_scrollBody" style="position: relative; overflow: auto; height: 368px; width: 100%;">
                    <div id="transfers">
                    <table class="sortable" role="grid" style="width: 948px;">
                        <tr>
                            <th>证券代码</th>
                            <th>证券名称</th>
                            <th>买/卖</th>
                            <th>下单数量</th>
                            <th>成交数量</th>
                            <th>下单时间</th>
                            <th>成交时间</th>
                            <th>成交均价</th>
                            <th>状态</th>
                        </tr>
                        {% if transfer != None %}
                            {% for i in transfer %}
                            <tr role="row" class="odd">
                                <td>{{i.ticker}}</td>
                                <td>{{i.name}}</td>
                                {% if i.direction == '卖出' %}
                                <td><span class="change-down">卖出</span></td>
                                {% else %}
                                <td><span class="change-up">买入</span></td>
                                {% endif %}
                                <td>{{i.orderAmount}}</td>
                                <td>{{i.dealAmount}}</td>
                                <td class='sorting_1'>{{i.orderTime}}</td>
                                <td>{{i.dealTime}}</td>
                                <td>{{i.cost}}</td>
                                <td>{{i.status}}</td>
                            </tr>
                            {% endfor %}
                            {% endif %}
                </table>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div></div>
        <div class="tab-pane risk" id="strategy-7081-risk">
            <div class="detail-risk">
                <div class="brief-wrapper">
                    <div class="brief" style="position: static; width: auto;">
                        <dl><dt>时间:</dt>
                            <dd>{{today}}</dd>
                            <dt>阿尔法:</dt>
                            {% if survey != None %}
                            <dd>{{survey.alpha[-1]}}</dd>
                            {% else %}
                            <dd>--</dd>
                            {% endif %}
                            <dt>贝塔:</dt>
                            {% if survey != None %}
                            <dd>{{survey.beta[-1]}}</dd>
                            {% else %}
                            <dd>--</dd>
                            {% endif %}
                            <dt>信息比率:</dt>
                            {% if survey != None %}
                            <dd>{{survey.information[-1]}}</dd>
                            {% else %}
                            <dd>--</dd>
                            {% endif %}
                            <dt>夏普比率:</dt>
                            {% if survey != None %}
                            <dd>{{survey.sharp[-1]}}</dd>
                            {% else %}
                            <dd>--</dd>
                            {% endif %}
                            <dt>收益波动率:</dt>
                            {% if survey != None %}
                            <dd>{{survey.fluctuation[-1]}}</dd>
                            {% else %}
                            <dd>--</dd>
                            {% endif %}
                        </dl>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default alpha">
                            <div class="panel-heading">阿尔法</div>
                            <div class="panel-body" data-highcharts-chart="2">
                                <div class="highcharts-container" id="highcharts-8" style="position: relative; overflow: hidden; width: 428px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                </div>
                                <script>
                                    $(function () {
                                      
                                      var alpha_data
                                      var None = null
                                      if ('{{survey != None}}' == 'True')
                                      {
                                      var dates = {{survey.date}};
                                      var alphas = {{survey.alpha}};
                                      
                                      alpha_data = new Array(dates.length);
                                      
                                      for(i = 0; i < dates.length; i++) {
                                      alpha_data[i] = [dates[i],alphas[i]]
                                      }
                                      }
                                      
                                      $('#highcharts-8').highcharts('StockChart', {
                                                                 
                                                                 rangeSelector: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 xAxis: {
                                                                 type: 'datetime',
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 }
                                                                 },
                                                                 
                                                                 yAxis: {
                                                                 opposite:false,
                                                                 labels: {
                                                                 formatter: function () {
                                                                 return this.value;
                                                                 }
                                                                 },
                                                                 plotLines: [{
                                                                             value: 0,
                                                                             width: 2,
                                                                             color: 'silver'
                                                                             }]
                                                                 },
                                                                 
                                                                 navigation: {
                                                                 buttonOptions: {
                                                                 enabled: false
                                                                 }
                                                                 },
                                                                 navigator: {
                                                                 enabled: false
                                                                 },
                                                                 scrollbar: {
                                                                 enabled: false
                                                                 },
                                                                 credits: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 tooltip: {
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 },
                                                                 pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',
                                                                 valueDecimals: 2
                                                                 },
                                                                 
                                                                 series: [{
                                                                          _colorIndex: 0,
                                                                          _symbolIndex: 0,
                                                                          data:alpha_data,
                                                                          name:"阿尔法"
                                                                          }]
                                                                 });
                                      
                                      });
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-default beta">
                            <div class="panel-heading">贝塔</div>
                            <div class="panel-body" data-highcharts-chart="3">
                                <div class="highcharts-container" id="highcharts-12" style="position: relative; overflow: hidden; width: 428px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                </div>
                                <script>
                                    $(function () {
                                      var beta_data
                                      var None = null
                                      if ('{{survey != None}}' == 'True'){
                                      var dates = {{survey.date}};
                                      var betas = {{survey.beta}};
                                      
                                      beta_data = new Array(dates.length);
                                      
                                      for(i = 0; i < dates.length; i++) {
                                      beta_data[i] = [dates[i],betas[i]]
                                      }
                                      }
                                      $('#highcharts-12').highcharts('StockChart', {
                                                                 
                                                                 rangeSelector: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 xAxis: {
                                                                 type: 'datetime',
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 }
                                                                 },
                                                                 
                                                                 yAxis: {
                                                                 opposite:false,
                                                                 labels: {
                                                                 formatter: function () {
                                                                 return this.value;
                                                                 }
                                                                 },
                                                                 plotLines: [{
                                                                             value: 0,
                                                                             width: 2,
                                                                             color: 'silver'
                                                                             }]
                                                                 },
                                                                 
                                                                 navigation: {
                                                                 buttonOptions: {
                                                                 enabled: false
                                                                 }
                                                                 },
                                                                 navigator: {
                                                                 enabled: false
                                                                 },
                                                                 scrollbar: {
                                                                 enabled: false
                                                                 },
                                                                 credits: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 tooltip: {
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 },
                                                                 pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',
                                                                 valueDecimals: 2
                                                                 },
                                                                 
                                                                 series: [{
                                                                          _colorIndex: 0,
                                                                          _symbolIndex: 0,
                                                                          data:beta_data,
                                                                          name:"贝塔"
                                                                          }]
                                                                 });
                                      
                                      });
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default info_ratio">
                            <div class="panel-heading">信息比率</div>
                            <div class="panel-body" data-highcharts-chart="4">
                                <div class="highcharts-container" id="highcharts-16" style="position: relative; overflow: hidden; width: 428px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                </div>
                                <script>
                                    $(function () {
                                      var information_data
                                      var None = null
                                      if ('{{survey != None}}' == 'True'){
                                      var dates = {{survey.date}};
                                      var informations = {{survey.information}};
                                      
                                      information_data = new Array(dates.length);
                                      
                                      for(i = 0; i < dates.length; i++) {
                                      information_data[i] = [dates[i],informations[i]]
                                      }
                                      }
                                      $('#highcharts-16').highcharts('StockChart', {
                                                                 
                                                                 rangeSelector: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 xAxis: {
                                                                 type: 'datetime',
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 }
                                                                 },
                                                                 
                                                                 yAxis: {
                                                                 opposite:false,
                                                                 labels: {
                                                                 formatter: function () {
                                                                 return this.value;
                                                                 }
                                                                 },
                                                                 plotLines: [{
                                                                             value: 0,
                                                                             width: 2,
                                                                             color: 'silver'
                                                                             }]
                                                                 },
                                                                 
                                                                 navigation: {
                                                                 buttonOptions: {
                                                                 enabled: false
                                                                 }
                                                                 },
                                                                 navigator: {
                                                                 enabled: false
                                                                 },
                                                                 scrollbar: {
                                                                 enabled: false
                                                                 },
                                                                 credits: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 tooltip: {
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 },
                                                                 pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',
                                                                 valueDecimals: 2
                                                                 },
                                                                 
                                                                 series: [{
                                                                          _colorIndex: 0,
                                                                          _symbolIndex: 0,
                                                                          data:information_data,
                                                                          name:"信息比率"
                                                                          }]
                                                                 });
                                      
                                      });
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-default sharpe">
                            <div class="panel-heading">夏普比率</div>
                            <div class="panel-body" data-highcharts-chart="5">
                                <div class="highcharts-container" id="highcharts-20" style="position: relative; overflow: hidden; width: 428px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                </div>
                                <script>
                                    $(function () {
                                      var sharp_data
                                      var None = null
                                      if ('{{survey != None}}' == 'True'){
                                      var dates = {{survey.date}};
                                      var sharps = {{survey.sharp}};
                                      
                                      sharp_data = new Array(dates.length);
                                      
                                      for(i = 0; i < dates.length; i++) {
                                      sharp_data[i] = [dates[i],sharps[i]]
                                      }
                                      }
                                      $('#highcharts-20').highcharts('StockChart', {
                                                                 
                                                                 rangeSelector: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 xAxis: {
                                                                 type: 'datetime',
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 }
                                                                 },
                                                                 
                                                                 yAxis: {
                                                                 opposite:false,
                                                                 labels: {
                                                                 formatter: function () {
                                                                 return this.value;
                                                                 }
                                                                 },
                                                                 plotLines: [{
                                                                             value: 0,
                                                                             width: 2,
                                                                             color: 'silver'
                                                                             }]
                                                                 },
                                                                 
                                                                 navigation: {
                                                                 buttonOptions: {
                                                                 enabled: false
                                                                 }
                                                                 },
                                                                 navigator: {
                                                                 enabled: false
                                                                 },
                                                                 scrollbar: {
                                                                 enabled: false
                                                                 },
                                                                 credits: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 tooltip: {
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 },
                                                                 pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',
                                                                 valueDecimals: 2
                                                                 },
                                                                 
                                                                 series: [{
                                                                          _colorIndex: 0,
                                                                          _symbolIndex: 0,
                                                                          data:sharp_data,
                                                                          name:"夏普比率"
                                                                          }]
                                                                 });
                                      
                                      });
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default volatility">
                            <div class="panel-heading">收益波动率</div>
                            <div class="panel-body" data-highcharts-chart="6">
                                <div class="highcharts-container" id="highcharts-24" style="position: relative; overflow: hidden; width: 428px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                                </div>
                                <script>
                                    $(function () {
                                      var fluctuation_data
                                      var None = null
                                      if ('{{survey != None}}' == 'True'){
                                      var dates = {{survey.date}};
                                      var fluctuations = {{survey.fluctuation}};
                                      
                                      fluctuation_data = new Array(dates.length);
                                      
                                      for(i = 0; i < dates.length; i++) {
                                      fluctuation_data[i] = [dates[i],fluctuations[i]]
                                      }
                                      }
                                      $('#highcharts-24').highcharts('StockChart', {
                                                                 
                                                                 rangeSelector: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 xAxis: {
                                                                 type: 'datetime',
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 }
                                                                 },
                                                                 
                                                                 yAxis: {
                                                                 opposite:false,
                                                                 labels: {
                                                                 formatter: function () {
                                                                 return this.value;
                                                                 }
                                                                 },
                                                                 plotLines: [{
                                                                             value: 0,
                                                                             width: 2,
                                                                             color: 'silver'
                                                                             }]
                                                                 },
                                                                 
                                                                 navigation: {
                                                                 buttonOptions: {
                                                                 enabled: false
                                                                 }
                                                                 },
                                                                 navigator: {
                                                                 enabled: false
                                                                 },
                                                                 scrollbar: {
                                                                 enabled: false
                                                                 },
                                                                 credits: {
                                                                 enabled: false
                                                                 },
                                                                 
                                                                 tooltip: {
                                                                 dateTimeLabelFormats: {
                                                                 second: '%Y-%m-%d<br/>%H:%M:%S',
                                                                 minute: '%Y-%m-%d<br/>%H:%M',
                                                                 hour: '%Y-%m-%d<br/>%H:%M',
                                                                 day: '%Y-%m-%d',
                                                                 week: '%Y-%m-%d',
                                                                 month: '%Y-%m',
                                                                 year: '%Y'
                                                                 },
                                                                 pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',
                                                                 valueDecimals: 2
                                                                 },
                                                                 
                                                                 series: [{
                                                                          _colorIndex: 0,
                                                                          _symbolIndex: 0,
                                                                          data:fluctuation_data,
                                                                          name:"收益波动率"
                                                                          }]
                                                                 });
                                      
                                      });
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane log" id="strategy-7081-log">
            <div class="detail-log">
                <p class="SYS INFO">2016-01-12 16:19 [SYS INFO] 策略初始化成功</p>
            </div>
        </div>
        <div class="tab-pane code" id="strategy-7081-code">
        
        </div>
        <div class="tab-pane settings" id="strategy-7081-settings">
        
        </div>
    </div>
</div>
</div></div>

<input type="hidden" id="strategy_id" value="{{strategyID}}">
<script>
    function loadpositionsXML()
    {
        var req = new XMLHttpRequest()
        req.onreadystatechange = function()
        {
            if (req.readyState == 4)
            {
                if (req.status != 200)
                {
                    //error handling code here
                }
                else
                {
                    var response = JSON.parse(req.responseText)
                    if (response.name != "该日没数据")
                    {
                        var out = "<table class='sortable' id='new_sorttable_positions' role='grid' style='width: 100%;'><tr><th>证券代码</th><th>证券名称</th><th>持仓数量</th><th>持仓成本</th><th>市价</th><th>市值</th><th>当日涨跌</th><th>权重</th></tr>";
                        
                        for(i = 0; i < response.results.length; i++) {
                            out += "<tr role='row' class='odd'><td>" + response.results[i].ticker + "</td><td>" + response.results[i].name + "</td><td>" + response.results[i].amount + "</td><td>" + response.results[i].cost + "</td><td>" + response.results[i].price + "</td><td>" + response.results[i].value + "</td>";
                            if(response.results[i].increase > 0) {
                                out += "<td class='sorting_1'><span class='change-up'>+" + response.results[i].increase + "</span></td>";
                            }
                            else{
                                out += "<td class='sorting_1'><span class='change-down'>+" + response.results[i].increase + "</span></td>";
                            }
                            out += "<td>" + response.results[i].weight + "</td></tr>";
                        }
                        out += "</table>"
                        document.getElementById('positions').innerHTML = out;
                        var newTableObject = document.getElementById('new_sorttable_positions');
                        sorttable.makeSortable(newTableObject);
                    }
                    else
                    {
                        var out = "<table class='sortable' id='new_sorttable_positions' role='grid' style='width: 100%;'><tr><th>证券代码</th><th>证券名称</th><th>持仓数量</th><th>持仓成本</th><th>市价</th><th>市值</th><th>当日涨跌</th><th>权重</th></tr><tr role='row' class='odd'><td valign='top' colspan='8' class='dataTables_empty'>没有数据</td></tr></table>";
                        document.getElementById('positions').innerHTML = out;
                    }
                }
            }
        }
        
        req.open('POST', '/positions')
        req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        var dt = document.getElementById('positions_date').value
        var id = document.getElementById('strategy_id').value
        var sec = document.getElementById('secret').value
        var postVars = 'date='+dt+'&strategyID='+id+'&secret='+sec
        req.send(postVars)
        
        return false
    }
</script>

<script>
    function loadtransfersXML()
    {
        var req = new XMLHttpRequest()
        req.onreadystatechange = function()
        {
            if (req.readyState == 4)
            {
                if (req.status != 200)
                {
                    //error handling code here
                }
                else
                {
                    var response = JSON.parse(req.responseText)
                    if (response.name != "该日没数据")
                    {
                        var out = "<table class='sortable' id='new_sorttable_transfers' role='grid' style='width: 948px;'><tr><th>证券代码</th><th>证券名称</th><th>买/卖</th><th>下单数量</th><th>成交数量</th><th>下单时间</th><th>成交时间</th><th>成交均价</th><th>状态</th></tr>";
                        
                        for(i = 0; i < response.results.length; i++) {
                            out += "<tr role='row' class='odd'><td>" + response.results[i].ticker + "</td><td>" + response.results[i].name + "</td>";
                            if(response.results[i].direction == "卖出"){
                                out += "<td><span class='change-down'>"+ response.results[i].direction + "</span></td>";
                            }
                            else{
                                out += "<td><span class='change-up'>"+ response.results[i].direction + "</span></td>";
                            }
                            out += "<td>" + response.results[i].orderAmount + "</td><td>" + response.results[i].dealAmount + "</td><td class='sorting_1'>" + response.results[i].orderTime + "</td><td>" + response.results[i].dealTime + "</td><td>" + response.results[i].cost + "</td><td>" + response.results[i].status + "</td></tr>";
                        }
                        out += "</table>"
                        document.getElementById('transfers').innerHTML = out;
                        var newTableObject = document.getElementById('new_sorttable_transfers');
                        sorttable.makeSortable(newTableObject);
                    }
                    else
                    {
                        var out = "<table class='sortable' id='new_sorttable_transfers' role='grid' style='width: 948px;'><tr><th>证券代码</th><th>证券名称</th><th>买/卖</th><th>下单数量</th><th>成交数量</th><th>下单时间</th><th>成交时间</th><th>成交均价</th><th>状态</th></tr><tr role='row' class='odd'><td valign='top' colspan='9' class='dataTables_empty'>没有数据</td></tr></table>";
                        document.getElementById('transfers').innerHTML = out;
                    }
                }
            }
        }
        
        req.open('POST', '/transfers')
        req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        var dt = document.getElementById('transfers_date').value
        var id = document.getElementById('strategy_id').value
        var sec = document.getElementById('secret').value
        var postVars = 'date='+dt+'&strategyID='+id+'&secret='+sec
        req.send(postVars)
        
        return false
    }
</script>


<script>
    $(document).ready(function(){
                      $('#dp1').datepicker({
                                           format: "yyyy-mm-dd"
                                           })
                      .on('changeDate', function(ev){
                          $('#dp1').datepicker('hide');
                          $('#positions_date').val(
                                                   $('#dp1').datepicker('getFormattedDate')
                                                   );
                          return loadpositionsXML();
                          });
                      });
    </script>



<script>
    $(document).ready(function(){
                      $('#dp2').datepicker({
                                           format: "yyyy-mm-dd"
                                           })
                      .on('changeDate', function(ev){
                          $('#dp2').datepicker('hide');
                          $('#transfers_date').val(
                                                   $('#dp2').datepicker('getFormattedDate')
                                                   );
                          return loadtransfersXML();
                          });
                      });
    </script>
</body></html>